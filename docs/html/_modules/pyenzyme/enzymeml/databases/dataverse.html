
<!DOCTYPE html>

<html>
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>pyenzyme.enzymeml.databases.dataverse â€” PyEnzyme 1.2.0 documentation</title>
<link href="../../../../_static/css/theme.css" rel="stylesheet"/>
<link href="../../../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet"/>
<link href="../../../../_static/vendor/fontawesome/5.13.0/css/all.min.css" rel="stylesheet"/>
<link as="font" crossorigin="" href="../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2" rel="preload" type="font/woff2"/>
<link as="font" crossorigin="" href="../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2" rel="preload" type="font/woff2"/>
<link href="../../../../_static/pygments.css" rel="stylesheet" type="text/css"/>
<link href="../../../../_static/css/blank.css" rel="stylesheet" type="text/css"/>
<link href="../../../../_static/autodoc_pydantic.css" rel="stylesheet" type="text/css"/>
<link href="../../../../_static/copybutton.css" rel="stylesheet" type="text/css"/>
<link as="script" href="../../../../_static/js/index.be7d3bbb2ef33a8344ce.js" rel="preload">
<script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
<script src="../../../../_static/jquery.js"></script>
<script src="../../../../_static/underscore.js"></script>
<script src="../../../../_static/doctools.js"></script>
<script src="../../../../_static/clipboard.min.js"></script>
<script src="../../../../_static/copybutton.js"></script>
<script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
<link href="../../../../genindex.html" rel="index" title="Index"/>
<link href="../../../../search.html" rel="search" title="Search"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="None" name="docsearch:language"/>
</link></head>
<body data-offset="80" data-spy="scroll" data-target="#bd-toc-nav">
<div class="container-fluid" id="banner"></div>
<nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">
<div id="navbar-start">
<a class="navbar-brand" href="../../../../index.html">
<p class="title">PyEnzyme</p>
</a>
</div>
<button aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-target="#navbar-collapsible" data-toggle="collapse" type="button">
<span class="navbar-toggler-icon"></span>
</button>
<div class="col-lg-9 collapse navbar-collapse" id="navbar-collapsible">
<div class="mr-auto" id="navbar-center">
<div class="navbar-center-item">
<ul class="navbar-nav" id="navbar-main-elements">
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="../../../../_getstarted/01_Overview.html">
  Overview
 </a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="../../../../_getstarted/02_Reading%20EnzymeML.html">
  Reading EnzymeML
 </a>
</li>
</ul>
</div>
</div>
<div id="navbar-end">
<div class="navbar-end-item">
<ul aria-label="Icon Links" class="navbar-nav" id="navbar-icon-links">
</ul>
</div>
</div>
</div>
</div>
</nav>
<div class="container-xl">
<div class="row">
<div class="col-12 col-md-3 bd-sidebar"><form action="../../../../search.html" class="bd-search d-flex align-items-center" method="get">
<i class="icon fas fa-search"></i>
<input aria-label="Search the docs ..." autocomplete="off" class="form-control" id="search-input" name="q" placeholder="Search the docs ..." type="search"/>
</form><nav aria-label="Main navigation" class="bd-links" id="bd-docs-nav">
<div class="bd-toc-item active">
</div>
</nav>
</div>
<div class="d-none d-xl-block col-xl-2 bd-toc">
</div>
<main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
<div>
<h1>Source code for pyenzyme.enzymeml.databases.dataverse</h1><div class="highlight"><pre>
<span></span><span class="sd">'''</span>
<span class="sd">File: dataverse.py</span>
<span class="sd">Project: core</span>
<span class="sd">Author: Jan Range</span>
<span class="sd">License: BSD-2 clause</span>
<span class="sd">-----</span>
<span class="sd">Last Modified: Thursday September 16th 2021 6:43:34 pm</span>
<span class="sd">Modified By: Jan Range (&lt;jan.range@simtech.uni-stuttgart.de&gt;)</span>
<span class="sd">-----</span>
<span class="sd">Copyright (c) 2021 Institute of Biochemistry and Technical Biochemistry Stuttgart</span>
<span class="sd">'''</span>

<span class="kn">from</span> <span class="nn">pyenzyme.enzymeml.databases.dataverseMapping</span> <span class="kn">import</span> <span class="n">DataverseMapping</span>
<span class="kn">from</span> <span class="nn">pyenzyme.enzymeml.core.exceptions</span> <span class="kn">import</span> <span class="n">DataverseError</span><span class="p">,</span> <span class="n">ValidationError</span>
<span class="kn">from</span> <span class="nn">pyDataverse.models</span> <span class="kn">import</span> <span class="n">Datafile</span><span class="p">,</span> <span class="n">Dataset</span>
<span class="kn">from</span> <span class="nn">pyDataverse.api</span> <span class="kn">import</span> <span class="n">NativeApi</span>

<span class="kn">import</span> <span class="nn">pyenzyme.enzymeml.core.enzymemldocument</span> <span class="k">as</span> <span class="nn">EnzDoc</span>

<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">os</span>


<div class="viewcode-block" id="DataverseFieldBase"><a class="viewcode-back" href="../../../../pyenzyme.enzymeml.databases.dataverse.html#pyenzyme.enzymeml.databases.dataverse.DataverseFieldBase">[docs]</a><span class="k">class</span> <span class="nc">DataverseFieldBase</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">"""This class serves as the basis for dataverse fields."""</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">typeName</span><span class="p">,</span> <span class="n">multiple</span><span class="p">,</span> <span class="n">typeClass</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">typeName</span> <span class="o">=</span> <span class="n">typeName</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">multiple</span> <span class="o">=</span> <span class="n">multiple</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">typeClass</span> <span class="o">=</span> <span class="n">typeClass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>

<div class="viewcode-block" id="DataverseFieldBase.toJSON"><a class="viewcode-back" href="../../../../pyenzyme.enzymeml.databases.dataverse.html#pyenzyme.enzymeml.databases.dataverse.DataverseFieldBase.toJSON">[docs]</a>    <span class="k">def</span> <span class="nf">toJSON</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>

        <span class="k">def</span> <span class="nf">transformAttr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">jsonData</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

                <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">"value"</span><span class="p">:</span>

                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">fields</span> <span class="o">=</span> <span class="p">{</span>
                            <span class="n">typeName</span><span class="p">:</span> <span class="n">field</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                            <span class="k">for</span> <span class="n">typeName</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                        <span class="p">}</span>

                        <span class="n">jsonData</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">fields</span>

                    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                        <span class="n">jsonData</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="n">jsonData</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>

            <span class="k">return</span> <span class="n">jsonData</span>

        <span class="k">if</span> <span class="n">d</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">transformAttr</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span>
                <span class="n">default</span><span class="o">=</span><span class="n">transformAttr</span><span class="p">,</span>
                <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">indent</span><span class="o">=</span><span class="mi">4</span>
            <span class="p">)</span></div></div>


<div class="viewcode-block" id="ParameterSet"><a class="viewcode-back" href="../../../../pyenzyme.enzymeml.databases.dataverse.html#pyenzyme.enzymeml.databases.dataverse.ParameterSet">[docs]</a><span class="k">class</span> <span class="nc">ParameterSet</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">"""This class serves as a helper to separate parameters from kineticLaws and to maintain modularity."""</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">unit</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unit</span> <span class="o">=</span> <span class="n">unit</span>

<div class="viewcode-block" id="ParameterSet.toJSON"><a class="viewcode-back" href="../../../../pyenzyme.enzymeml.databases.dataverse.html#pyenzyme.enzymeml.databases.dataverse.ParameterSet.toJSON">[docs]</a>    <span class="k">def</span> <span class="nf">toJSON</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">enzmldoc</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">jsonData</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">key</span><span class="p">:</span> <span class="n">enzmldoc</span><span class="o">.</span><span class="n">getUnitString</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">"unit"</span> <span class="k">else</span> <span class="n">item</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">d</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">jsonData</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">jsonData</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="uploadToDataverse"><a class="viewcode-back" href="../../../../pyenzyme.enzymeml.databases.dataverse.html#pyenzyme.enzymeml.databases.dataverse.uploadToDataverse">[docs]</a><span class="k">def</span> <span class="nf">uploadToDataverse</span><span class="p">(</span><span class="n">baseURL</span><span class="p">,</span> <span class="n">API_Token</span><span class="p">,</span> <span class="n">dataverseName</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">enzmldoc</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Uploads an EnzymeML document to Dataverse. Can be done using either a path to upload an existing OMEX archive or directly from an EnzymeMLDocument object. Please note, that when this method is used with an object, the OMEX archive will be written to your current working directory.</span>

<span class="sd">    Args:</span>
<span class="sd">        baseURL (String): URL to a Dataverse installation</span>
<span class="sd">        API_Token (String): API Token given from your Dataverse installation for authentication.</span>
<span class="sd">        dataverseName (String): Name of the dataverse to upload the EnzymeML document. You can find the name in the link of your dataverse (e.g. https://dataverse.installation/dataverse/{dataverseName})</span>
<span class="sd">        filename (String, optional): Specifies the path to an already existing OMEX archive. Please note, if given, any EnzymeMLDocument in the 'enzmldoc' argument are overriden. Defaults to None.</span>
<span class="sd">        enzmldoc (EnzymeMLDocument, optional): EnzymeML document object describing an experiment. Defaults to None.</span>

<span class="sd">    Raises:</span>
<span class="sd">        AttributeError: Raised when neither a filename nor an EnzymeMLDocument object was provided.</span>
<span class="sd">        ValidationError: Raised when the validation fails.</span>
<span class="sd">    """</span>

    <span class="k">if</span> <span class="n">filename</span><span class="p">:</span>
        <span class="n">enzmldoc</span> <span class="o">=</span> <span class="n">EnzDoc</span><span class="o">.</span><span class="n">EnzymeMLDocument</span><span class="o">.</span><span class="n">fromFile</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">enzmldoc</span><span class="p">:</span>
        <span class="n">enzmldoc</span><span class="o">.</span><span class="n">toFile</span><span class="p">(</span><span class="s2">"."</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">enzmldoc</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">' '</span><span class="p">,</span> <span class="s1">'_'</span><span class="p">)</span><span class="si">}</span><span class="s2">.omex"</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">"."</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span>
            <span class="s2">"Please specify either a path to an EnzymeML document or an EnzymeMLDocument object"</span>
        <span class="p">)</span>

    <span class="c1"># Check if the minimal requirement (Dataset authors) is given</span>
    <span class="k">if</span> <span class="n">enzmldoc</span><span class="o">.</span><span class="n">hasCreator</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="s2">"Please provide at least one author for the dataset. Otherwise Dataverse wont accept the dataset. For this, initialize a `Creator` object and add it to the EnzymeMLDocument via enzmldoc.setCreator() method."</span>
        <span class="p">)</span>

    <span class="c1"># Initialize pyDataverse API and Dataset</span>
    <span class="n">api</span> <span class="o">=</span> <span class="n">NativeApi</span><span class="p">(</span><span class="n">baseURL</span><span class="p">,</span> <span class="n">API_Token</span><span class="p">)</span>
    <span class="n">ds</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">()</span>
    <span class="n">ds</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">enzmldoc</span><span class="o">.</span><span class="n">toDataverseJSON</span><span class="p">())</span>

    <span class="c1"># Finally, validate the JSON</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">ds</span><span class="o">.</span><span class="n">validate_json</span><span class="p">():</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"The EnzymeML document for </span><span class="si">{</span><span class="n">dataverseName</span><span class="si">}</span><span class="s2"> is invalid. Please revisit the logs that were printed while validation."</span>
        <span class="p">)</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span>
        <span class="n">dataverseName</span><span class="p">,</span> <span class="n">enzmldoc</span><span class="o">.</span><span class="n">toDataverseJSON</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">"status"</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">"OK"</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">DataverseError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"Your dataset could not be uploaded to the dataverse. Please revisit the error log: </span><span class="se">\n\n</span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="s2">"</span>
        <span class="p">)</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">Datafile</span><span class="p">()</span>
    <span class="n">ds_pid</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">"data"</span><span class="p">][</span><span class="s2">"persistentId"</span><span class="p">]</span>
    <span class="n">df</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s2">"pid"</span><span class="p">:</span> <span class="n">ds_pid</span><span class="p">,</span> <span class="s2">"filename"</span><span class="p">:</span> <span class="n">filename</span><span class="p">})</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">upload_datafile</span><span class="p">(</span><span class="n">ds_pid</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">json</span><span class="p">())</span></div>


<div class="viewcode-block" id="toDataverseJSON"><a class="viewcode-back" href="../../../../pyenzyme.enzymeml.databases.dataverse.html#pyenzyme.enzymeml.databases.dataverse.toDataverseJSON">[docs]</a><span class="k">def</span> <span class="nf">toDataverseJSON</span><span class="p">(</span><span class="n">enzmldoc</span><span class="p">):</span>
    <span class="sd">"""Generates a Dataverse compatible JSON string to upload an EnzymeMLDocument.</span>

<span class="sd">    Returns:</span>
<span class="sd">        String: Dataverse compatible JSON string</span>
<span class="sd">    """</span>

    <span class="n">vesselCompound</span> <span class="o">=</span> <span class="n">generateCompoundField</span><span class="p">(</span>
        <span class="n">objects</span><span class="o">=</span><span class="p">[</span><span class="n">enzmldoc</span><span class="o">.</span><span class="n">getVessel</span><span class="p">()],</span>
        <span class="n">className</span><span class="o">=</span><span class="s2">"enzymeMLVessel"</span><span class="p">,</span>
        <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">enzmldoc</span><span class="o">=</span><span class="n">enzmldoc</span>
    <span class="p">)</span>

    <span class="n">reactantsCompound</span> <span class="o">=</span> <span class="n">generateCompoundField</span><span class="p">(</span>
        <span class="n">objects</span><span class="o">=</span><span class="n">enzmldoc</span><span class="o">.</span><span class="n">getReactantList</span><span class="p">(),</span>
        <span class="n">className</span><span class="o">=</span><span class="s2">"enzymeMLReactant"</span><span class="p">,</span>
        <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">enzmldoc</span><span class="o">=</span><span class="n">enzmldoc</span>
    <span class="p">)</span>

    <span class="n">proteinsCompound</span> <span class="o">=</span> <span class="n">generateCompoundField</span><span class="p">(</span>
        <span class="n">objects</span><span class="o">=</span><span class="n">enzmldoc</span><span class="o">.</span><span class="n">getProteinList</span><span class="p">(),</span>
        <span class="n">className</span><span class="o">=</span><span class="s2">"enzymeMLProtein"</span><span class="p">,</span>
        <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">enzmldoc</span><span class="o">=</span><span class="n">enzmldoc</span>
    <span class="p">)</span>

    <span class="n">reactionsCompound</span> <span class="o">=</span> <span class="n">generateCompoundField</span><span class="p">(</span>
        <span class="n">objects</span><span class="o">=</span><span class="n">enzmldoc</span><span class="o">.</span><span class="n">getReactionList</span><span class="p">(),</span>
        <span class="n">className</span><span class="o">=</span><span class="s2">"enzymeMLReaction"</span><span class="p">,</span>
        <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">enzmldoc</span><span class="o">=</span><span class="n">enzmldoc</span>
    <span class="p">)</span>

    <span class="n">kineticLaws</span><span class="p">,</span> <span class="n">parameters</span> <span class="o">=</span> <span class="n">__getAllKineticLaws</span><span class="p">(</span><span class="n">enzmldoc</span><span class="p">)</span>

    <span class="n">kineticLawCompound</span> <span class="o">=</span> <span class="n">generateCompoundField</span><span class="p">(</span>
        <span class="n">objects</span><span class="o">=</span><span class="n">kineticLaws</span><span class="p">,</span>
        <span class="n">className</span><span class="o">=</span><span class="s2">"enzymeMLKineticLaw"</span><span class="p">,</span>
        <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">enzmldoc</span><span class="o">=</span><span class="n">enzmldoc</span>
    <span class="p">)</span>

    <span class="n">kineticParameterCompound</span> <span class="o">=</span> <span class="n">generateCompoundField</span><span class="p">(</span>
        <span class="n">objects</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span>
        <span class="n">className</span><span class="o">=</span><span class="s2">"enzymeMLKineticParameter"</span><span class="p">,</span>
        <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">enzmldoc</span><span class="o">=</span><span class="n">enzmldoc</span>
    <span class="p">)</span>

    <span class="c1"># Summarize all compounds to the EnzymeML Metadatablock</span>
    <span class="n">enzymeMLMetadata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">"displayName"</span><span class="p">:</span> <span class="s2">"EnzymeML Metadata"</span><span class="p">,</span>
        <span class="s2">"fields"</span><span class="p">:</span> <span class="p">[</span>
            <span class="n">vesselCompound</span><span class="p">,</span>
            <span class="n">reactantsCompound</span><span class="p">,</span>
            <span class="n">proteinsCompound</span><span class="p">,</span>
            <span class="n">reactionsCompound</span><span class="p">,</span>
            <span class="n">kineticLawCompound</span><span class="p">,</span>
            <span class="n">kineticParameterCompound</span>
        <span class="p">]</span>
    <span class="p">}</span>

    <span class="c1"># Generate citation metadata</span>

    <span class="c1"># Title information</span>
    <span class="n">titleField</span> <span class="o">=</span> <span class="n">DataverseFieldBase</span><span class="p">(</span>
        <span class="n">typeName</span><span class="o">=</span><span class="s2">"title"</span><span class="p">,</span>
        <span class="n">multiple</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">typeClass</span><span class="o">=</span><span class="s2">"primitive"</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">enzmldoc</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span>
    <span class="p">)</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Dataset description</span>
    <span class="n">dsDescripitonValueField</span> <span class="o">=</span> <span class="n">DataverseFieldBase</span><span class="p">(</span>
        <span class="n">typeName</span><span class="o">=</span><span class="s2">"dsDescriptionValue"</span><span class="p">,</span>
        <span class="n">multiple</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">typeClass</span><span class="o">=</span><span class="s2">"primitive"</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="sa">f</span><span class="s2">"EnzymeML document describing </span><span class="si">{</span><span class="n">enzmldoc</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span><span class="si">}</span><span class="s2">"</span>
    <span class="p">)</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">dsDescriptionField</span> <span class="o">=</span> <span class="n">DataverseFieldBase</span><span class="p">(</span>
        <span class="n">typeName</span><span class="o">=</span><span class="s2">"dsDescription"</span><span class="p">,</span>
        <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">typeClass</span><span class="o">=</span><span class="s2">"compound"</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="p">[{</span><span class="s2">"dsDescriptionValue"</span><span class="p">:</span> <span class="n">dsDescripitonValueField</span><span class="p">}]</span>
    <span class="p">)</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Subject information</span>
    <span class="n">subject</span> <span class="o">=</span> <span class="n">DataverseFieldBase</span><span class="p">(</span>
        <span class="n">typeName</span><span class="o">=</span><span class="s2">"subject"</span><span class="p">,</span>
        <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">typeClass</span><span class="o">=</span><span class="s2">"controlledVocabulary"</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="s2">"Chemistry"</span><span class="p">]</span>
    <span class="p">)</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Author information</span>
    <span class="n">creators</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">creator</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">enzmldoc</span><span class="o">.</span><span class="n">getCreator</span><span class="p">()):</span>

        <span class="n">nameString</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">creator</span><span class="o">.</span><span class="n">getGname</span><span class="p">()</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">creator</span><span class="o">.</span><span class="n">getFname</span><span class="p">()</span><span class="si">}</span><span class="s2">"</span>

        <span class="n">authorName</span> <span class="o">=</span> <span class="n">DataverseFieldBase</span><span class="p">(</span>
            <span class="n">typeName</span><span class="o">=</span><span class="s2">"authorName"</span><span class="p">,</span>
            <span class="n">multiple</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">typeClass</span><span class="o">=</span><span class="s2">"primitive"</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">nameString</span>
        <span class="p">)</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">creators</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
            <span class="n">authorName</span><span class="p">[</span><span class="s2">"typeName"</span><span class="p">]:</span> <span class="n">authorName</span>
        <span class="p">})</span>

        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># Get contact data</span>
            <span class="n">datasetContactEmail</span> <span class="o">=</span> <span class="n">DataverseFieldBase</span><span class="p">(</span>
                <span class="n">typeName</span><span class="o">=</span><span class="s2">"datasetContactEmail"</span><span class="p">,</span>
                <span class="n">multiple</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">typeClass</span><span class="o">=</span><span class="s2">"primitive"</span><span class="p">,</span>
                <span class="n">value</span><span class="o">=</span><span class="n">creator</span><span class="o">.</span><span class="n">getMail</span><span class="p">()</span>
            <span class="p">)</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

            <span class="n">datasetContactName</span> <span class="o">=</span> <span class="n">DataverseFieldBase</span><span class="p">(</span>
                <span class="n">typeName</span><span class="o">=</span><span class="s2">"datasetContactName"</span><span class="p">,</span>
                <span class="n">multiple</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">typeClass</span><span class="o">=</span><span class="s2">"primitive"</span><span class="p">,</span>
                <span class="n">value</span><span class="o">=</span><span class="n">nameString</span>
            <span class="p">)</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

            <span class="n">datasetContactCompound</span> <span class="o">=</span> <span class="n">DataverseFieldBase</span><span class="p">(</span>
                <span class="n">typeName</span><span class="o">=</span><span class="s2">"datasetContact"</span><span class="p">,</span>
                <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">typeClass</span><span class="o">=</span><span class="s2">"compound"</span><span class="p">,</span>
                <span class="n">value</span><span class="o">=</span><span class="p">[{</span>
                    <span class="n">field</span><span class="p">[</span><span class="s2">"typeName"</span><span class="p">]:</span> <span class="n">field</span>
                    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span>
                    <span class="p">[</span><span class="n">datasetContactEmail</span><span class="p">,</span> <span class="n">datasetContactName</span><span class="p">]</span>
                <span class="p">}]</span>
            <span class="p">)</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">authorCompound</span> <span class="o">=</span> <span class="n">DataverseFieldBase</span><span class="p">(</span>
        <span class="n">typeName</span><span class="o">=</span><span class="s2">"author"</span><span class="p">,</span>
        <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">typeClass</span><span class="o">=</span><span class="s2">"compound"</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">creators</span>
    <span class="p">)</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Compose citation metadatablock</span>
    <span class="n">citationMetadata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">"displayName"</span><span class="p">:</span> <span class="s2">"Citation Metadata"</span><span class="p">,</span>
        <span class="s2">"fields"</span><span class="p">:</span> <span class="p">[</span>
            <span class="n">titleField</span><span class="p">,</span>
            <span class="n">datasetContactCompound</span><span class="p">,</span>
            <span class="n">dsDescriptionField</span><span class="p">,</span>
            <span class="n">authorCompound</span><span class="p">,</span>
            <span class="n">subject</span>
        <span class="p">]</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">"datasetVersion"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"metadataBlocks"</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">"enzymeML"</span><span class="p">:</span> <span class="n">enzymeMLMetadata</span><span class="p">,</span>
                <span class="s2">"citation"</span><span class="p">:</span> <span class="n">citationMetadata</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span></div>


<div class="viewcode-block" id="generateCompoundField"><a class="viewcode-back" href="../../../../pyenzyme.enzymeml.databases.dataverse.html#pyenzyme.enzymeml.databases.dataverse.generateCompoundField">[docs]</a><span class="k">def</span> <span class="nf">generateCompoundField</span><span class="p">(</span><span class="n">objects</span><span class="p">,</span> <span class="n">className</span><span class="p">,</span> <span class="n">enzmldoc</span><span class="p">,</span> <span class="n">multiple</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>

    <span class="c1"># Gather meta data</span>
    <span class="n">typeName</span> <span class="o">=</span> <span class="n">className</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"enzymeML"</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="c1"># generate individual fields</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">__populateFields</span><span class="p">(</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">enzmldoc</span><span class="o">=</span><span class="n">enzmldoc</span><span class="p">),</span> <span class="n">typeName</span><span class="p">,</span> <span class="n">enzmldoc</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objects</span>
    <span class="p">]</span>

    <span class="c1"># create the compund field</span>
    <span class="n">compound</span> <span class="o">=</span> <span class="n">DataverseFieldBase</span><span class="p">(</span>
        <span class="n">typeName</span><span class="o">=</span><span class="n">className</span><span class="p">,</span>
        <span class="n">multiple</span><span class="o">=</span><span class="n">multiple</span><span class="p">,</span>
        <span class="n">typeClass</span><span class="o">=</span><span class="s2">"compound"</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">fields</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">compound</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<span class="k">def</span> <span class="nf">__populateFields</span><span class="p">(</span><span class="n">dictionary</span><span class="p">,</span> <span class="n">className</span><span class="p">,</span> <span class="n">enzmldoc</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

    <span class="c1"># Initialize data structures</span>
    <span class="n">mapping</span> <span class="o">=</span> <span class="n">DataverseMapping</span><span class="p">[</span><span class="n">className</span><span class="p">]</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">dictionary</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Get options form DataverseMapping</span>
            <span class="n">options</span> <span class="o">=</span> <span class="n">mapping</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">False</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="c1"># Catch bools --&gt; All other types are handled as strings</span>
                <span class="n">item</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

                <span class="k">if</span> <span class="s2">"unit"</span> <span class="ow">in</span> <span class="n">key</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>

                    <span class="k">if</span> <span class="s2">"mole / l"</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                        <span class="n">item</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">"mole / l"</span><span class="p">,</span> <span class="s2">"M"</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="s2">"K"</span> <span class="ow">in</span> <span class="n">item</span><span class="p">:</span>
                        <span class="n">item</span> <span class="o">=</span> <span class="s2">"Kelvin"</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="n">item</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

            <span class="k">elif</span> <span class="s2">"constant"</span> <span class="ow">in</span> <span class="n">key</span><span class="p">:</span>
                <span class="c1"># Match metadatablock</span>
                <span class="n">item</span> <span class="o">=</span> <span class="s2">"Constant"</span> <span class="k">if</span> <span class="n">item</span> <span class="ow">is</span> <span class="kc">True</span> <span class="k">else</span> <span class="s2">"Not constant"</span>
            <span class="c1"># Generatew field and add to fields dictionary</span>
            <span class="n">field</span> <span class="o">=</span> <span class="n">DataverseFieldBase</span><span class="p">(</span><span class="o">**</span><span class="n">options</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">item</span><span class="p">)</span>
            <span class="n">fields</span><span class="p">[</span><span class="n">field</span><span class="o">.</span><span class="n">typeName</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>

    <span class="c1"># Handle Reactions</span>
    <span class="k">if</span> <span class="n">className</span> <span class="o">==</span> <span class="s2">"Reaction"</span><span class="p">:</span>
        <span class="n">__reorderReaction</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="n">enzmldoc</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fields</span>


<span class="k">def</span> <span class="nf">__reorderReaction</span><span class="p">(</span><span class="n">reactionJSON</span><span class="p">,</span> <span class="n">enzmldoc</span><span class="p">):</span>
    <span class="sd">"""Parses the json representation given by generateCompoundField to match the metadatablock's schema.</span>

<span class="sd">    Args:</span>
<span class="sd">        reactionJSON (dict): JSON representation of the reaction generated by generateCompoundField</span>
<span class="sd">    """</span>

    <span class="c1"># Initialize variables</span>
    <span class="n">educts</span><span class="p">,</span> <span class="n">products</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>

    <span class="n">keys</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">"enzymeMLReactionEduct"</span><span class="p">,</span>
        <span class="s2">"enzymeMLReactionProduct"</span><span class="p">,</span>
        <span class="s2">"enzymeMLReactionModifier"</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
        <span class="n">elements</span> <span class="o">=</span> <span class="n">reactionJSON</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="n">elementString</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">elements</span><span class="p">[</span><span class="s2">"value"</span><span class="p">]:</span>
            <span class="n">speciesName</span> <span class="o">=</span> <span class="n">__getSpeciesName</span><span class="p">(</span><span class="n">element</span><span class="p">[</span><span class="s2">"species"</span><span class="p">],</span> <span class="n">enzmldoc</span><span class="p">)</span>
            <span class="n">elementString</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">speciesName</span><span class="p">)</span>

            <span class="k">if</span> <span class="s2">"Educt"</span> <span class="ow">in</span> <span class="n">key</span><span class="p">:</span>
                <span class="n">educts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">element</span><span class="p">[</span><span class="s1">'stoich'</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">speciesName</span><span class="si">}</span><span class="s2">"</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="s2">"Product"</span> <span class="ow">in</span> <span class="n">key</span><span class="p">:</span>
                <span class="n">products</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">element</span><span class="p">[</span><span class="s1">'stoich'</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">speciesName</span><span class="si">}</span><span class="s2">"</span>
                <span class="p">)</span>

        <span class="c1"># Add to JSON data</span>
        <span class="n">reactionJSON</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">DataverseFieldBase</span><span class="p">(</span>
            <span class="n">typeName</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
            <span class="n">multiple</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">typeClass</span><span class="o">=</span><span class="s2">"primitive"</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="s2">"; "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">elementString</span><span class="p">)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Turn everything to a string and add it to the dictionary</span>
    <span class="n">equationString</span> <span class="o">=</span> <span class="s2">" -&gt; "</span><span class="o">.</span><span class="n">join</span><span class="p">([</span>
        <span class="s2">" + "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">educts</span><span class="p">),</span> <span class="s2">" + "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">products</span><span class="p">)</span>
    <span class="p">])</span>

    <span class="n">typeName</span> <span class="o">=</span> <span class="s2">"enzymeMLReactionEquation"</span>
    <span class="n">reactionJSON</span><span class="p">[</span><span class="n">typeName</span><span class="p">]</span> <span class="o">=</span> <span class="n">DataverseFieldBase</span><span class="p">(</span>
        <span class="n">typeName</span><span class="o">=</span><span class="n">typeName</span><span class="p">,</span>
        <span class="n">multiple</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">equationString</span><span class="p">,</span>
        <span class="n">typeClass</span><span class="o">=</span><span class="s2">"primitive"</span>
    <span class="p">)</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">__getSpeciesName</span><span class="p">(</span><span class="n">id_</span><span class="p">,</span> <span class="n">enzmldoc</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">enzmldoc</span><span class="o">.</span><span class="n">getReactant</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">enzmldoc</span><span class="o">.</span><span class="n">getProtein</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">__getAllKineticLaws</span><span class="p">(</span><span class="n">enzmldoc</span><span class="p">):</span>
    <span class="n">kineticLaws</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">parameters</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">reaction</span> <span class="ow">in</span> <span class="n">enzmldoc</span><span class="o">.</span><span class="n">getReactionList</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">model</span> <span class="o">=</span> <span class="n">reaction</span><span class="o">.</span><span class="n">getModel</span><span class="p">()</span>
            <span class="n">model</span><span class="o">.</span><span class="n">setReaction</span><span class="p">(</span><span class="n">reaction</span><span class="o">.</span><span class="n">getId</span><span class="p">())</span>
            <span class="n">kineticLaws</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>

            <span class="n">parameterSets</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">ParameterSet</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">paramName</span><span class="p">,</span>
                    <span class="n">value</span><span class="o">=</span><span class="n">paramValue</span><span class="p">,</span>
                    <span class="n">unit</span><span class="o">=</span><span class="n">paramUnit</span>
                <span class="p">)</span>
                <span class="k">for</span> <span class="n">paramName</span><span class="p">,</span> <span class="p">(</span><span class="n">paramValue</span><span class="p">,</span> <span class="n">paramUnit</span><span class="p">)</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">getParameters</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="p">]</span>

            <span class="n">parameters</span> <span class="o">+=</span> <span class="n">parameterSets</span>

        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>

    <span class="k">return</span> <span class="n">kineticLaws</span><span class="p">,</span> <span class="n">parameters</span>
</pre></div>
</div>
<div class="prev-next-area">
</div>
</main>
</div>
</div>
<script src="../../../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>
<footer class="footer mt-5 mt-md-0">
<div class="container">
<div class="footer-item">
<p class="copyright">
    Â© Copyright 2021, Jan.<br/>
</p>
</div>
<div class="footer-item">
<p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.3.1.<br/>
</p>
</div>
</div>
</footer>
</body>
</html>