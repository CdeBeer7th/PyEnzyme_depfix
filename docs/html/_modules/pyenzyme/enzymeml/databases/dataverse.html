<!DOCTYPE html>
<html >
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
      <title>pyenzyme.enzymeml.databases.dataverse</title>
    
          <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
          <link rel="stylesheet" href="../../../../_static/theme.css " type="text/css" />
          <link rel="stylesheet" href="../../../../_static/autodoc_pydantic.css" type="text/css" />
          <link rel="stylesheet" href="../../../../_static/copybutton.css" type="text/css" />
      
      <!-- sphinx script_files -->
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/clipboard.min.js"></script>
        <script src="../../../../_static/copybutton.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>

      
      <!-- bundled in js (rollup iife) -->
      <!-- <script src="../../../../_static/theme-vendors.js"></script> -->
      <script src="../../../../_static/theme.js" defer></script>
    
  <link rel="index" title="Index" href="../../../../genindex.html" />
  <link rel="search" title="Search" href="../../../../search.html" /> 
  </head>

  <body>
    <div id="app">
    <div class="theme-container" :class="pageClasses"><navbar @toggle-sidebar="toggleSidebar">
  <router-link to="../../../../index.html" class="home-link">
    
      <span class="site-name">Test</span>
    
  </router-link>

  <div class="links">
    <navlinks class="can-hide">



    </navlinks>
  </div>
</navbar>

      
      <div class="sidebar-mask" @click="toggleSidebar(false)">
      </div>
        <sidebar @toggle-sidebar="toggleSidebar">
          
          <navlinks>
            



            
          </navlinks><div id="searchbox" class="searchbox" role="search">
  <div class="caption"><span class="caption-text">Quick search</span>
    <div class="searchformwrapper">
      <form class="search" action="../../../../search.html" method="get">
        <input type="text" name="q" />
        <input type="submit" value="Search" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div><div class="sidebar-links" role="navigation" aria-label="main navigation">
  
    <div class="sidebar-group">
      <p class="caption">
        <span class="caption-text"><a href="../../../../index.html#welcome-to-pyenzyme-s-documentation">Contents:</a></span>
      </p>
      <ul class="">
        
      </ul>
    </div>
  
</div>
        </sidebar>

      <page>
          <div class="body-header" role="navigation" aria-label="navigation">
  
  <ul class="breadcrumbs">
    <li><a href="../../../../index.html">Docs</a> &raquo;</li>
    
      <li><a href="../../../index.html">Module code</a> &raquo;</li>
    
    <li>pyenzyme.enzymeml.databases.dataverse</li>
  </ul>
  

  <ul class="page-nav">
</ul>
  
</div>
<hr>
          <div class="content" role="main" v-pre>
            
  <h1>Source code for pyenzyme.enzymeml.databases.dataverse</h1><div class="highlight"><pre>
<span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">File: dataverse.py</span>
<span class="sd">Project: core</span>
<span class="sd">Author: Jan Range</span>
<span class="sd">License: BSD-2 clause</span>
<span class="sd">-----</span>
<span class="sd">Last Modified: Thursday September 16th 2021 6:43:34 pm</span>
<span class="sd">Modified By: Jan Range (&lt;jan.range@simtech.uni-stuttgart.de&gt;)</span>
<span class="sd">-----</span>
<span class="sd">Copyright (c) 2021 Institute of Biochemistry and Technical Biochemistry Stuttgart</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="kn">from</span> <span class="nn">pyenzyme.enzymeml.databases.dataverseMapping</span> <span class="kn">import</span> <span class="n">DataverseMapping</span>
<span class="kn">from</span> <span class="nn">pyenzyme.enzymeml.core.exceptions</span> <span class="kn">import</span> <span class="n">DataverseError</span><span class="p">,</span> <span class="n">ValidationError</span>
<span class="kn">from</span> <span class="nn">pyDataverse.models</span> <span class="kn">import</span> <span class="n">Datafile</span><span class="p">,</span> <span class="n">Dataset</span>
<span class="kn">from</span> <span class="nn">pyDataverse.api</span> <span class="kn">import</span> <span class="n">NativeApi</span>

<span class="kn">import</span> <span class="nn">pyenzyme.enzymeml.core.enzymemldocument</span> <span class="k">as</span> <span class="nn">EnzDoc</span>

<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">os</span>


<div class="viewcode-block" id="DataverseFieldBase"><a class="viewcode-back" href="../../../../pyenzyme.enzymeml.databases.html#pyenzyme.enzymeml.databases.dataverse.DataverseFieldBase">[docs]</a><span class="k">class</span> <span class="nc">DataverseFieldBase</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This class serves as the basis for dataverse fields.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">typeName</span><span class="p">,</span> <span class="n">multiple</span><span class="p">,</span> <span class="n">typeClass</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">typeName</span> <span class="o">=</span> <span class="n">typeName</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">multiple</span> <span class="o">=</span> <span class="n">multiple</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">typeClass</span> <span class="o">=</span> <span class="n">typeClass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>

<div class="viewcode-block" id="DataverseFieldBase.toJSON"><a class="viewcode-back" href="../../../../pyenzyme.enzymeml.databases.html#pyenzyme.enzymeml.databases.dataverse.DataverseFieldBase.toJSON">[docs]</a>    <span class="k">def</span> <span class="nf">toJSON</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>

        <span class="k">def</span> <span class="nf">transformAttr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">jsonData</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

                <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span>

                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">fields</span> <span class="o">=</span> <span class="p">{</span>
                            <span class="n">typeName</span><span class="p">:</span> <span class="n">field</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                            <span class="k">for</span> <span class="n">typeName</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                        <span class="p">}</span>

                        <span class="n">jsonData</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">fields</span>

                    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                        <span class="n">jsonData</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="n">jsonData</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>

            <span class="k">return</span> <span class="n">jsonData</span>

        <span class="k">if</span> <span class="n">d</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">transformAttr</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span>
                <span class="n">default</span><span class="o">=</span><span class="n">transformAttr</span><span class="p">,</span>
                <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">indent</span><span class="o">=</span><span class="mi">4</span>
            <span class="p">)</span></div></div>


<div class="viewcode-block" id="ParameterSet"><a class="viewcode-back" href="../../../../pyenzyme.enzymeml.databases.html#pyenzyme.enzymeml.databases.dataverse.ParameterSet">[docs]</a><span class="k">class</span> <span class="nc">ParameterSet</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This class serves as a helper to separate parameters from kineticLaws and to maintain modularity.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">unit</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unit</span> <span class="o">=</span> <span class="n">unit</span>

<div class="viewcode-block" id="ParameterSet.toJSON"><a class="viewcode-back" href="../../../../pyenzyme.enzymeml.databases.html#pyenzyme.enzymeml.databases.dataverse.ParameterSet.toJSON">[docs]</a>    <span class="k">def</span> <span class="nf">toJSON</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">enzmldoc</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">jsonData</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">key</span><span class="p">:</span> <span class="n">enzmldoc</span><span class="o">.</span><span class="n">getUnitString</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;unit&quot;</span> <span class="k">else</span> <span class="n">item</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">d</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">jsonData</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">jsonData</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="uploadToDataverse"><a class="viewcode-back" href="../../../../pyenzyme.enzymeml.databases.html#pyenzyme.enzymeml.databases.dataverse.uploadToDataverse">[docs]</a><span class="k">def</span> <span class="nf">uploadToDataverse</span><span class="p">(</span><span class="n">baseURL</span><span class="p">,</span> <span class="n">API_Token</span><span class="p">,</span> <span class="n">dataverseName</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">enzmldoc</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Uploads an EnzymeML document to Dataverse. Can be done using either a path to upload an existing OMEX archive or directly from an EnzymeMLDocument object. Please note, that when this method is used with an object, the OMEX archive will be written to your current working directory.</span>

<span class="sd">    Args:</span>
<span class="sd">        baseURL (String): URL to a Dataverse installation</span>
<span class="sd">        API_Token (String): API Token given from your Dataverse installation for authentication.</span>
<span class="sd">        dataverseName (String): Name of the dataverse to upload the EnzymeML document. You can find the name in the link of your dataverse (e.g. https://dataverse.installation/dataverse/{dataverseName})</span>
<span class="sd">        filename (String, optional): Specifies the path to an already existing OMEX archive. Please note, if given, any EnzymeMLDocument in the &#39;enzmldoc&#39; argument are overriden. Defaults to None.</span>
<span class="sd">        enzmldoc (EnzymeMLDocument, optional): EnzymeML document object describing an experiment. Defaults to None.</span>

<span class="sd">    Raises:</span>
<span class="sd">        AttributeError: Raised when neither a filename nor an EnzymeMLDocument object was provided.</span>
<span class="sd">        ValidationError: Raised when the validation fails.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">filename</span><span class="p">:</span>
        <span class="n">enzmldoc</span> <span class="o">=</span> <span class="n">EnzDoc</span><span class="o">.</span><span class="n">EnzymeMLDocument</span><span class="o">.</span><span class="n">fromFile</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">enzmldoc</span><span class="p">:</span>
        <span class="n">enzmldoc</span><span class="o">.</span><span class="n">toFile</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">enzmldoc</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">.omex&quot;</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span>
            <span class="s2">&quot;Please specify either a path to an EnzymeML document or an EnzymeMLDocument object&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Check if the minimal requirement (Dataset authors) is given</span>
    <span class="k">if</span> <span class="n">enzmldoc</span><span class="o">.</span><span class="n">hasCreator</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="s2">&quot;Please provide at least one author for the dataset. Otherwise Dataverse wont accept the dataset. For this, initialize a `Creator` object and add it to the EnzymeMLDocument via enzmldoc.setCreator() method.&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Initialize pyDataverse API and Dataset</span>
    <span class="n">api</span> <span class="o">=</span> <span class="n">NativeApi</span><span class="p">(</span><span class="n">baseURL</span><span class="p">,</span> <span class="n">API_Token</span><span class="p">)</span>
    <span class="n">ds</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">()</span>
    <span class="n">ds</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">enzmldoc</span><span class="o">.</span><span class="n">toDataverseJSON</span><span class="p">())</span>

    <span class="c1"># Finally, validate the JSON</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">ds</span><span class="o">.</span><span class="n">validate_json</span><span class="p">():</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The EnzymeML document for </span><span class="si">{</span><span class="n">dataverseName</span><span class="si">}</span><span class="s2"> is invalid. Please revisit the logs that were printed while validation.&quot;</span>
        <span class="p">)</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span>
        <span class="n">dataverseName</span><span class="p">,</span> <span class="n">enzmldoc</span><span class="o">.</span><span class="n">toDataverseJSON</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;OK&quot;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">DataverseError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Your dataset could not be uploaded to the dataverse. Please revisit the error log: </span><span class="se">\n\n</span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">Datafile</span><span class="p">()</span>
    <span class="n">ds_pid</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;data&quot;</span><span class="p">][</span><span class="s2">&quot;persistentId&quot;</span><span class="p">]</span>
    <span class="n">df</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s2">&quot;pid&quot;</span><span class="p">:</span> <span class="n">ds_pid</span><span class="p">,</span> <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="n">filename</span><span class="p">})</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">upload_datafile</span><span class="p">(</span><span class="n">ds_pid</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">json</span><span class="p">())</span></div>


<div class="viewcode-block" id="toDataverseJSON"><a class="viewcode-back" href="../../../../pyenzyme.enzymeml.databases.html#pyenzyme.enzymeml.databases.dataverse.toDataverseJSON">[docs]</a><span class="k">def</span> <span class="nf">toDataverseJSON</span><span class="p">(</span><span class="n">enzmldoc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generates a Dataverse compatible JSON string to upload an EnzymeMLDocument.</span>

<span class="sd">    Returns:</span>
<span class="sd">        String: Dataverse compatible JSON string</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">vesselCompound</span> <span class="o">=</span> <span class="n">generateCompoundField</span><span class="p">(</span>
        <span class="n">objects</span><span class="o">=</span><span class="p">[</span><span class="n">enzmldoc</span><span class="o">.</span><span class="n">getVessel</span><span class="p">()],</span>
        <span class="n">className</span><span class="o">=</span><span class="s2">&quot;enzymeMLVessel&quot;</span><span class="p">,</span>
        <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">enzmldoc</span><span class="o">=</span><span class="n">enzmldoc</span>
    <span class="p">)</span>

    <span class="n">reactantsCompound</span> <span class="o">=</span> <span class="n">generateCompoundField</span><span class="p">(</span>
        <span class="n">objects</span><span class="o">=</span><span class="n">enzmldoc</span><span class="o">.</span><span class="n">getReactantList</span><span class="p">(),</span>
        <span class="n">className</span><span class="o">=</span><span class="s2">&quot;enzymeMLReactant&quot;</span><span class="p">,</span>
        <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">enzmldoc</span><span class="o">=</span><span class="n">enzmldoc</span>
    <span class="p">)</span>

    <span class="n">proteinsCompound</span> <span class="o">=</span> <span class="n">generateCompoundField</span><span class="p">(</span>
        <span class="n">objects</span><span class="o">=</span><span class="n">enzmldoc</span><span class="o">.</span><span class="n">getProteinList</span><span class="p">(),</span>
        <span class="n">className</span><span class="o">=</span><span class="s2">&quot;enzymeMLProtein&quot;</span><span class="p">,</span>
        <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">enzmldoc</span><span class="o">=</span><span class="n">enzmldoc</span>
    <span class="p">)</span>

    <span class="n">reactionsCompound</span> <span class="o">=</span> <span class="n">generateCompoundField</span><span class="p">(</span>
        <span class="n">objects</span><span class="o">=</span><span class="n">enzmldoc</span><span class="o">.</span><span class="n">getReactionList</span><span class="p">(),</span>
        <span class="n">className</span><span class="o">=</span><span class="s2">&quot;enzymeMLReaction&quot;</span><span class="p">,</span>
        <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">enzmldoc</span><span class="o">=</span><span class="n">enzmldoc</span>
    <span class="p">)</span>

    <span class="n">kineticLaws</span><span class="p">,</span> <span class="n">parameters</span> <span class="o">=</span> <span class="n">__getAllKineticLaws</span><span class="p">(</span><span class="n">enzmldoc</span><span class="p">)</span>

    <span class="n">kineticLawCompound</span> <span class="o">=</span> <span class="n">generateCompoundField</span><span class="p">(</span>
        <span class="n">objects</span><span class="o">=</span><span class="n">kineticLaws</span><span class="p">,</span>
        <span class="n">className</span><span class="o">=</span><span class="s2">&quot;enzymeMLKineticLaw&quot;</span><span class="p">,</span>
        <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">enzmldoc</span><span class="o">=</span><span class="n">enzmldoc</span>
    <span class="p">)</span>

    <span class="n">kineticParameterCompound</span> <span class="o">=</span> <span class="n">generateCompoundField</span><span class="p">(</span>
        <span class="n">objects</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span>
        <span class="n">className</span><span class="o">=</span><span class="s2">&quot;enzymeMLKineticParameter&quot;</span><span class="p">,</span>
        <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">enzmldoc</span><span class="o">=</span><span class="n">enzmldoc</span>
    <span class="p">)</span>

    <span class="c1"># Summarize all compounds to the EnzymeML Metadatablock</span>
    <span class="n">enzymeMLMetadata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;displayName&quot;</span><span class="p">:</span> <span class="s2">&quot;EnzymeML Metadata&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="n">vesselCompound</span><span class="p">,</span>
            <span class="n">reactantsCompound</span><span class="p">,</span>
            <span class="n">proteinsCompound</span><span class="p">,</span>
            <span class="n">reactionsCompound</span><span class="p">,</span>
            <span class="n">kineticLawCompound</span><span class="p">,</span>
            <span class="n">kineticParameterCompound</span>
        <span class="p">]</span>
    <span class="p">}</span>

    <span class="c1"># Generate citation metadata</span>

    <span class="c1"># Title information</span>
    <span class="n">titleField</span> <span class="o">=</span> <span class="n">DataverseFieldBase</span><span class="p">(</span>
        <span class="n">typeName</span><span class="o">=</span><span class="s2">&quot;title&quot;</span><span class="p">,</span>
        <span class="n">multiple</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">typeClass</span><span class="o">=</span><span class="s2">&quot;primitive&quot;</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">enzmldoc</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span>
    <span class="p">)</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Dataset description</span>
    <span class="n">dsDescripitonValueField</span> <span class="o">=</span> <span class="n">DataverseFieldBase</span><span class="p">(</span>
        <span class="n">typeName</span><span class="o">=</span><span class="s2">&quot;dsDescriptionValue&quot;</span><span class="p">,</span>
        <span class="n">multiple</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">typeClass</span><span class="o">=</span><span class="s2">&quot;primitive&quot;</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;EnzymeML document describing </span><span class="si">{</span><span class="n">enzmldoc</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">dsDescriptionField</span> <span class="o">=</span> <span class="n">DataverseFieldBase</span><span class="p">(</span>
        <span class="n">typeName</span><span class="o">=</span><span class="s2">&quot;dsDescription&quot;</span><span class="p">,</span>
        <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">typeClass</span><span class="o">=</span><span class="s2">&quot;compound&quot;</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;dsDescriptionValue&quot;</span><span class="p">:</span> <span class="n">dsDescripitonValueField</span><span class="p">}]</span>
    <span class="p">)</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Subject information</span>
    <span class="n">subject</span> <span class="o">=</span> <span class="n">DataverseFieldBase</span><span class="p">(</span>
        <span class="n">typeName</span><span class="o">=</span><span class="s2">&quot;subject&quot;</span><span class="p">,</span>
        <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">typeClass</span><span class="o">=</span><span class="s2">&quot;controlledVocabulary&quot;</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Chemistry&quot;</span><span class="p">]</span>
    <span class="p">)</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Author information</span>
    <span class="n">creators</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">creator</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">enzmldoc</span><span class="o">.</span><span class="n">getCreator</span><span class="p">()):</span>

        <span class="n">nameString</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">creator</span><span class="o">.</span><span class="n">getGname</span><span class="p">()</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">creator</span><span class="o">.</span><span class="n">getFname</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="n">authorName</span> <span class="o">=</span> <span class="n">DataverseFieldBase</span><span class="p">(</span>
            <span class="n">typeName</span><span class="o">=</span><span class="s2">&quot;authorName&quot;</span><span class="p">,</span>
            <span class="n">multiple</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">typeClass</span><span class="o">=</span><span class="s2">&quot;primitive&quot;</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">nameString</span>
        <span class="p">)</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">creators</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
            <span class="n">authorName</span><span class="p">[</span><span class="s2">&quot;typeName&quot;</span><span class="p">]:</span> <span class="n">authorName</span>
        <span class="p">})</span>

        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># Get contact data</span>
            <span class="n">datasetContactEmail</span> <span class="o">=</span> <span class="n">DataverseFieldBase</span><span class="p">(</span>
                <span class="n">typeName</span><span class="o">=</span><span class="s2">&quot;datasetContactEmail&quot;</span><span class="p">,</span>
                <span class="n">multiple</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">typeClass</span><span class="o">=</span><span class="s2">&quot;primitive&quot;</span><span class="p">,</span>
                <span class="n">value</span><span class="o">=</span><span class="n">creator</span><span class="o">.</span><span class="n">getMail</span><span class="p">()</span>
            <span class="p">)</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

            <span class="n">datasetContactName</span> <span class="o">=</span> <span class="n">DataverseFieldBase</span><span class="p">(</span>
                <span class="n">typeName</span><span class="o">=</span><span class="s2">&quot;datasetContactName&quot;</span><span class="p">,</span>
                <span class="n">multiple</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">typeClass</span><span class="o">=</span><span class="s2">&quot;primitive&quot;</span><span class="p">,</span>
                <span class="n">value</span><span class="o">=</span><span class="n">nameString</span>
            <span class="p">)</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

            <span class="n">datasetContactCompound</span> <span class="o">=</span> <span class="n">DataverseFieldBase</span><span class="p">(</span>
                <span class="n">typeName</span><span class="o">=</span><span class="s2">&quot;datasetContact&quot;</span><span class="p">,</span>
                <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">typeClass</span><span class="o">=</span><span class="s2">&quot;compound&quot;</span><span class="p">,</span>
                <span class="n">value</span><span class="o">=</span><span class="p">[{</span>
                    <span class="n">field</span><span class="p">[</span><span class="s2">&quot;typeName&quot;</span><span class="p">]:</span> <span class="n">field</span>
                    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span>
                    <span class="p">[</span><span class="n">datasetContactEmail</span><span class="p">,</span> <span class="n">datasetContactName</span><span class="p">]</span>
                <span class="p">}]</span>
            <span class="p">)</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">authorCompound</span> <span class="o">=</span> <span class="n">DataverseFieldBase</span><span class="p">(</span>
        <span class="n">typeName</span><span class="o">=</span><span class="s2">&quot;author&quot;</span><span class="p">,</span>
        <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">typeClass</span><span class="o">=</span><span class="s2">&quot;compound&quot;</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">creators</span>
    <span class="p">)</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Compose citation metadatablock</span>
    <span class="n">citationMetadata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;displayName&quot;</span><span class="p">:</span> <span class="s2">&quot;Citation Metadata&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="n">titleField</span><span class="p">,</span>
            <span class="n">datasetContactCompound</span><span class="p">,</span>
            <span class="n">dsDescriptionField</span><span class="p">,</span>
            <span class="n">authorCompound</span><span class="p">,</span>
            <span class="n">subject</span>
        <span class="p">]</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;datasetVersion&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;metadataBlocks&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;enzymeML&quot;</span><span class="p">:</span> <span class="n">enzymeMLMetadata</span><span class="p">,</span>
                <span class="s2">&quot;citation&quot;</span><span class="p">:</span> <span class="n">citationMetadata</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span></div>


<div class="viewcode-block" id="generateCompoundField"><a class="viewcode-back" href="../../../../pyenzyme.enzymeml.databases.html#pyenzyme.enzymeml.databases.dataverse.generateCompoundField">[docs]</a><span class="k">def</span> <span class="nf">generateCompoundField</span><span class="p">(</span><span class="n">objects</span><span class="p">,</span> <span class="n">className</span><span class="p">,</span> <span class="n">enzmldoc</span><span class="p">,</span> <span class="n">multiple</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>

    <span class="c1"># Gather meta data</span>
    <span class="n">typeName</span> <span class="o">=</span> <span class="n">className</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;enzymeML&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="c1"># generate individual fields</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">__populateFields</span><span class="p">(</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">enzmldoc</span><span class="o">=</span><span class="n">enzmldoc</span><span class="p">),</span> <span class="n">typeName</span><span class="p">,</span> <span class="n">enzmldoc</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objects</span>
    <span class="p">]</span>

    <span class="c1"># create the compund field</span>
    <span class="n">compound</span> <span class="o">=</span> <span class="n">DataverseFieldBase</span><span class="p">(</span>
        <span class="n">typeName</span><span class="o">=</span><span class="n">className</span><span class="p">,</span>
        <span class="n">multiple</span><span class="o">=</span><span class="n">multiple</span><span class="p">,</span>
        <span class="n">typeClass</span><span class="o">=</span><span class="s2">&quot;compound&quot;</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">fields</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">compound</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<span class="k">def</span> <span class="nf">__populateFields</span><span class="p">(</span><span class="n">dictionary</span><span class="p">,</span> <span class="n">className</span><span class="p">,</span> <span class="n">enzmldoc</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

    <span class="c1"># Initialize data structures</span>
    <span class="n">mapping</span> <span class="o">=</span> <span class="n">DataverseMapping</span><span class="p">[</span><span class="n">className</span><span class="p">]</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">dictionary</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Get options form DataverseMapping</span>
            <span class="n">options</span> <span class="o">=</span> <span class="n">mapping</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">False</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="c1"># Catch bools --&gt; All other types are handled as strings</span>
                <span class="n">item</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

                <span class="k">if</span> <span class="s2">&quot;unit&quot;</span> <span class="ow">in</span> <span class="n">key</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>

                    <span class="k">if</span> <span class="s2">&quot;mole / l&quot;</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                        <span class="n">item</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;mole / l&quot;</span><span class="p">,</span> <span class="s2">&quot;M&quot;</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="s2">&quot;K&quot;</span> <span class="ow">in</span> <span class="n">item</span><span class="p">:</span>
                        <span class="n">item</span> <span class="o">=</span> <span class="s2">&quot;Kelvin&quot;</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="n">item</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

            <span class="k">elif</span> <span class="s2">&quot;constant&quot;</span> <span class="ow">in</span> <span class="n">key</span><span class="p">:</span>
                <span class="c1"># Match metadatablock</span>
                <span class="n">item</span> <span class="o">=</span> <span class="s2">&quot;Constant&quot;</span> <span class="k">if</span> <span class="n">item</span> <span class="ow">is</span> <span class="kc">True</span> <span class="k">else</span> <span class="s2">&quot;Not constant&quot;</span>
            <span class="c1"># Generatew field and add to fields dictionary</span>
            <span class="n">field</span> <span class="o">=</span> <span class="n">DataverseFieldBase</span><span class="p">(</span><span class="o">**</span><span class="n">options</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">item</span><span class="p">)</span>
            <span class="n">fields</span><span class="p">[</span><span class="n">field</span><span class="o">.</span><span class="n">typeName</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>

    <span class="c1"># Handle Reactions</span>
    <span class="k">if</span> <span class="n">className</span> <span class="o">==</span> <span class="s2">&quot;Reaction&quot;</span><span class="p">:</span>
        <span class="n">__reorderReaction</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="n">enzmldoc</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fields</span>


<span class="k">def</span> <span class="nf">__reorderReaction</span><span class="p">(</span><span class="n">reactionJSON</span><span class="p">,</span> <span class="n">enzmldoc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Parses the json representation given by generateCompoundField to match the metadatablock&#39;s schema.</span>

<span class="sd">    Args:</span>
<span class="sd">        reactionJSON (dict): JSON representation of the reaction generated by generateCompoundField</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Initialize variables</span>
    <span class="n">educts</span><span class="p">,</span> <span class="n">products</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>

    <span class="n">keys</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;enzymeMLReactionEduct&quot;</span><span class="p">,</span>
        <span class="s2">&quot;enzymeMLReactionProduct&quot;</span><span class="p">,</span>
        <span class="s2">&quot;enzymeMLReactionModifier&quot;</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
        <span class="n">elements</span> <span class="o">=</span> <span class="n">reactionJSON</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="n">elementString</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">elements</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]:</span>
            <span class="n">speciesName</span> <span class="o">=</span> <span class="n">__getSpeciesName</span><span class="p">(</span><span class="n">element</span><span class="p">[</span><span class="s2">&quot;species&quot;</span><span class="p">],</span> <span class="n">enzmldoc</span><span class="p">)</span>
            <span class="n">elementString</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">speciesName</span><span class="p">)</span>

            <span class="k">if</span> <span class="s2">&quot;Educt&quot;</span> <span class="ow">in</span> <span class="n">key</span><span class="p">:</span>
                <span class="n">educts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">element</span><span class="p">[</span><span class="s1">&#39;stoich&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">speciesName</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="s2">&quot;Product&quot;</span> <span class="ow">in</span> <span class="n">key</span><span class="p">:</span>
                <span class="n">products</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">element</span><span class="p">[</span><span class="s1">&#39;stoich&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">speciesName</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

        <span class="c1"># Add to JSON data</span>
        <span class="n">reactionJSON</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">DataverseFieldBase</span><span class="p">(</span>
            <span class="n">typeName</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
            <span class="n">multiple</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">typeClass</span><span class="o">=</span><span class="s2">&quot;primitive&quot;</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="s2">&quot;; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">elementString</span><span class="p">)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Turn everything to a string and add it to the dictionary</span>
    <span class="n">equationString</span> <span class="o">=</span> <span class="s2">&quot; -&gt; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span>
        <span class="s2">&quot; + &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">educts</span><span class="p">),</span> <span class="s2">&quot; + &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">products</span><span class="p">)</span>
    <span class="p">])</span>

    <span class="n">typeName</span> <span class="o">=</span> <span class="s2">&quot;enzymeMLReactionEquation&quot;</span>
    <span class="n">reactionJSON</span><span class="p">[</span><span class="n">typeName</span><span class="p">]</span> <span class="o">=</span> <span class="n">DataverseFieldBase</span><span class="p">(</span>
        <span class="n">typeName</span><span class="o">=</span><span class="n">typeName</span><span class="p">,</span>
        <span class="n">multiple</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="n">equationString</span><span class="p">,</span>
        <span class="n">typeClass</span><span class="o">=</span><span class="s2">&quot;primitive&quot;</span>
    <span class="p">)</span><span class="o">.</span><span class="n">toJSON</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">__getSpeciesName</span><span class="p">(</span><span class="n">id_</span><span class="p">,</span> <span class="n">enzmldoc</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">enzmldoc</span><span class="o">.</span><span class="n">getReactant</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">enzmldoc</span><span class="o">.</span><span class="n">getProtein</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">__getAllKineticLaws</span><span class="p">(</span><span class="n">enzmldoc</span><span class="p">):</span>
    <span class="n">kineticLaws</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">parameters</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">reaction</span> <span class="ow">in</span> <span class="n">enzmldoc</span><span class="o">.</span><span class="n">getReactionList</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">model</span> <span class="o">=</span> <span class="n">reaction</span><span class="o">.</span><span class="n">getModel</span><span class="p">()</span>
            <span class="n">model</span><span class="o">.</span><span class="n">setReaction</span><span class="p">(</span><span class="n">reaction</span><span class="o">.</span><span class="n">getId</span><span class="p">())</span>
            <span class="n">kineticLaws</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>

            <span class="n">parameterSets</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">ParameterSet</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">paramName</span><span class="p">,</span>
                    <span class="n">value</span><span class="o">=</span><span class="n">paramValue</span><span class="p">,</span>
                    <span class="n">unit</span><span class="o">=</span><span class="n">paramUnit</span>
                <span class="p">)</span>
                <span class="k">for</span> <span class="n">paramName</span><span class="p">,</span> <span class="p">(</span><span class="n">paramValue</span><span class="p">,</span> <span class="n">paramUnit</span><span class="p">)</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">getParameters</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="p">]</span>

            <span class="n">parameters</span> <span class="o">+=</span> <span class="n">parameterSets</span>

        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>

    <span class="k">return</span> <span class="n">kineticLaws</span><span class="p">,</span> <span class="n">parameters</span>
</pre></div>

          </div>
          <div class="page-nav">
            <div class="inner"><ul class="page-nav">
</ul><div class="footer" role="contentinfo">
      &#169; Copyright 2021, Jan.
    <br>
    Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.3.1 with <a href="https://github.com/schettino72/sphinx_press_theme">Press Theme</a> 0.8.0.
</div>
            </div>
          </div>
      </page>
    </div></div>
    
    
  </body>
</html>